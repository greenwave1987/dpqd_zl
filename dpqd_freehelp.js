/**
 * cron: 0 0-2,21-23/1 * * *
 * 优先使用Nolan免费接口，无法获取数据再联系@JD_API_bot获取token,并设置环境变量jd_api_token，不助力将无法获取店铺签到数据！
*/
console.log('当前版本号20220810！')
let TK_SIGN
if (process.env.TK_SIGN) {
	TK_SIGN = JSON.parse(process.env.TK_SIGN)
}

if (process.env.TK_SIGN_ID&&process.env.TK_SIGN_SIGN) {
	TK_SIGN = {id:process.env.TK_SIGN_ID,sign:process.env.TK_SIGN_SIGN}
}
if (!TK_SIGN) {
	console.log('联系@dpqd_boss获取TK_SIGN.')
	return
}
let token=''
if (process.env.jd_api_token) {
	token = process.env.jd_api_token
}
if (!token) {
	console.log('优先使用Nolan免费接口，无法获取数据再联系@JD_API_bot获取token,并设置环境变量jd_api_token，每日签到获取积分.')
}
const $ = new Env('挖宝助力（店铺签到专用）');
var _0xod4='jsjiami.com.v6',_0xod4_=['_0xod4'],_0x3bd5=[_0xod4,'EMKQJVY=','YMKpQjMv','worDisKQwovDiQ==','GsKnw55L','wofChcOvGE4=','Q8KKfcOnKA==','dBTCtCA=','HMKHMkVUw53CpVI=','w43Ch8OTw4TDqQ==','w7PCu8O1wold','F8KzGnRg','w7MEw5g=','woTClsKjMRk=','bhle','Sy7Cmw==','WMKvw44X','woEfOH/Cpw==','H8KZL3VF','wr8hUMOzwro=','GsKxElxz','wq7CsA3ClcK6wrY=','wpkcI07CrQ==','b13Do8Kyw7A=','HcKHM0g=','woM0w7phWQ==','V2rDpcKUw7TCjg==','dcOtw5cpw4Q=','wq3ChAzDoQ==','JMOiw5fDmsOJ','TjLCssK7w6HCkA==','LMKxAFRx','CcKaw48=','wrfDlsKWwqzDvwHDkFHDpMKG','wrAbf8O/','H8KRBFRHw4U=','w7TDmsOKwrbCucKhecKBw67DlFDCnw==','BcKRw4HDpcOo','woHCtcKbFxF/IR0=','wrhFwr7CtMK6VhrCkkc=','XGrDv8K+w6/CiMKOPQ==','WMK3D8OUWWAJ','wrkfZsOXfcKMTGEywpY=','woHCtcKbDBtpPADDiMKv','XcKkw6wC','w5oiw63CtQkbaw==','MMOcw4/Dr8OI','woHCgMK+HwXCrsOQw4jDkg9D','wpVvwpHChkcj','w406w6nChsKu','wqofYcOu','VSTCjMK4w6TClsK7','wpF0wrvCm0E=','wqgLw7VvQ8KT','PMK7I2ld','w6xowrTDvlJZ','wo3DhBsBw4g=','S8KdIcOVUw==','MTLCtsOOwr3Dm8OH6YGP55yCC8Kfw6LDlHolUQ==','woTCugbCnMKT','VwPClsK/w4I=','5LyU5YWa5LyH55Wfw6jDkllkw6Plh5HotZDmjIjlj77vvqPoip/ljLfnlpLliqTmlJ/pnLjogILnsK7DhTvDp8OowpBnFMKnwoPCh8K/6I615Y2PH1skY3fDsOW5qeitgOe+pOeOnuWjoOWOrumEocOvwqUIckA1EcO3wqx5KAbvvpzkuZflip3liaHls6zmlYDms7LojbXljqbluaLpkqvnrLPli4bmlLjmjb3vv6oR','wr0VwqzCllg=','wrPCngvDoA7CjA==','K8Ktw67DpMOx','cMOfcV8t','YCTCm8K7w5Q=','cBNN','IsO0M8KJfDzDpMK4OcO4DXAZw7XCiQDDumTCrMOsZOmBgOecoMKcwq7CqF0Qw4zDl8Ovwq3DkcK2Nn7ClsOvwot7wp3CusOSKQ==','wrTCpwDCssKw','wrXCvhnCsiw=','W8OJQMOLwrs=','wrvCkgjDqw==','ScOpW14g','HMKGK0tKw5TDjMKPW0I=','wr/CnSDChTI=','5L6G5YS/5L+A55e8wpVqwpZsB+WGl+i1uuaPm+WPje+8ruiIvuWMvOeVsOWLvuaXs+mdmeiDquewpGUcJ8KXw6vDo8K0AHBHwq3ojIzljaTDpsKOw594F8OP5buO6K+I57y654yc5aOh5Y6D6YaIw67DrixtRDQ0MVpOG8O/772u5LiK5Ymu5YmQ5bOp5pSc5rCl6Iy85Y6H5bmU6ZOM562R5Yqq5pSZ5o2T77yL','VTTCksKgw6zCmMK7','wqExwqrCtH8ecjw=','56eA5ZOG5byR5aaZ5Yu+5Yub7760','S8Kvw5MC','asOffsOwwqBtasKE','wpIpQsOOwpk=','6L+N5rO56L+x5Yil5L2i5YiX5Yi177+d','wp04LsOPwpwDw57ChA==','w4smw6nCugA=','eTfDuA==','w4Ymw7DCvA==','w5TDueWlq+i0gMKOVeWPkeWamcO+KQ==','ansWFsOKw5FM','wpgXTsOj','wq0CFMOQwoc=','TsKLw50OEA==','wpbCgh7Cng4=','w588w53CsMKq','woTDt8OR','w4XCkTzDgG4=','wrUibBJz','Y8O6w7crw4w=','w6DCpiPDkVM=','FcKaJw==','FlxrwojDveacseisnOius+awmuWntui0oizigofvupbigqnvuZc=','w6bCnx3DsU0=','w7ZLNBXCsw==','WGDDr8KW','wrXDpDc=','wrTDqiQnw64=','5Lio55Snw6PDhsOzwpLpqbborpTmi7fliqnvvqM=','w4sow7nCvA==','FcKPw4PDi8Ov','KsK8w67DgcO2','w5bCk8Ol','wqp8wqbCl8KN','w7wYw5vCrQ==','wop1wpQ=','5Liv55emw5JDBMOm6amk6K2u5oin5YuS77+q','worCv8KIGgx4','w5pvIifCsg==','eSnDlH9n','woMlA1rClQ==','wqrCrcKbc27mnoHor53orbXms7/lpo3otL9/4oCM77ii4oKK77mV','Wn/Du8Kfw6nChcKbIcKOWcOMw7DCgzR3NQ==','Z8KLw6csJA==','w6J1BATCq8OqF8KoBw==','wpIXVw==','w4Qww5nCowM=','wpfDmSQww7Y=','ScO7cXw0','bsKmw5guPA==','wp7DrMOQZcK8DcOTAxQ=','VcKKNsOdfw==','wq42w5ZFcA==','wonCrgDCgC4=','WcKuw6wC','csOQw4YZw44=','bcOLZMOs','QA/CogXDuQ==','Wls1EsOL','wq3CkA3Dug0=','w6g4wqnDrQ==','wrjCsBfCkA==','dy7CjsKg','wogIaMOlwo8=','wrIVdQ==','5L2j55WU5LuJ55Oe','V2DDrMK2w7LClA==','wqHDssOMVcKU','576957ud6ZSE6K2H776R','w65iwrbDuEg=','wo/ClSzCvsKP','wpbClDhGw7k=','McOrw53DhMOn','wqrCkg7ChsKh','wpzDnDIrw6Q=','wprCpBLCixZVw7XCgA==','worCh8ObIl4=','5Y6t5bG85L2t55ayWsKNVXQ55Yao6Lex5o+c5Y2q6I2t5Y6zSFPDmTLpqJvor77vvJo=','WMO4WWQh','TMO7TF8kwqpDwoPDnA==','w4NqEDXChg==','a8OjT3UG','wrHCnhg=','wqXDmcKBwoPDmA==','w74/w5LCtR8=','IsOfw43DtcOc','w5ECw43CgMKh','XMKAH8O5aA==','ZMKow5svDA==','wpfCpAnDggQ=','wrbDpTU=','aSbCly3Dhw==','dcKHDcObVA==','WMKdZxk7','wqPDlsKM','woEgA8Onwo4=','576j57ie6ZSR6K6m776E','BcKIOX97','w5LCiMO2wr8jDjg=','6I6I5YyE5aWK6La177y5','PcKXIUlb','ewZDwqjCmMO0wpohPsKrZnjDnsK1wrU6Tg==','w47CmcO6wrs2SWNvZsOxw7PDo8OIw7bDvcKFQxwjwrBDw5p1L8KrwoQqKHjCksKcWBnDgcKxSsOkwqHDjQp6LcKTYgfCjX5yIl/CvB7ChVXCnUdpwrfDtcOcwqbDuMKCZCFIwpfDicO6WGzDoEZPw7vCucKFwo3Duzx7UMOpw7MIXMKNw51yw5xiUU0dSMOsaDd5ZwLDji5Ywp3CkBhjUMKacHHDl8Klwp7DgwFYQMOew64nwqLClSARAsOxE8KRXsOOLcO3aQ==','f8KkZBoQ','woPCi8OnDCPDrsOZw7/CjB8Mw7DCnMKDYx/Dk8O8w7fDocKgK0RzdjVqZMKUL8OZwrnCgmTDkRLCo8KVGis3P8Khw7fDlype','wrEXWsOvwpfDtMKvThXChsO2w4cJwp9FQ8KLwpnCtDnDqXBKwqXCmMKtfWN5wq0ywpp6BDjDj8KqGsK+CcO/w4pqw5/CssKUbGU6N3LCpBY1w6tYwqJ2wqRZQ0Exdm7DrXFkesKSTDfCl2sHw4V7woLCgcKqwrx8KMKOw7g9wq9Qw4XCuRsKMsOYwqLDv8KWw43DucKsTMOlwo/CmMKnwqvCmsOEQ0LDoETCgMKD','EcKHPg==','wpwYQC55','HsK/N0Ng','wo0dfsOCZQ==','el7DhcKCw7k=','w6Niwr7DvA==','Z8OfT8OqwqA=','aR5HwqHDhA==','wpfCqwXChg==','XcOpXUw=','FsKYBncM','wo7ClsOOwpHCvw==','wrLCrSHCnwI=','w5XCvcOY','5L+/55Sl5Li555Kf','wq4+G8OkwpA=','Y8KyVT0F','wqslZA==','w4xMwrhcJQ==','w4FRwp1vJA==','w6V2GQ==','w7IYw5g=','wpfCpR/Cgg==','wrccQDFu','SFjDisKYw7E=','wop1wpTCsEEj','JcOUw6HDlMOs','wqIlwq3Crm4b','wqzDh8KMwrjDgiHDkl3DsMK3LcOyw64=','w4YLw4rCmzs=','wofClsK5MBfCrA==','5L+O5YSY5L6855eoRRhzOFzlh7botYrmjbTlj4nvvLHoi5fljYLnlb/li5jmlq/pnKbogKjns4vDhsORMHzCmUIoVHbDicOy6I+D5Y2SXcOBUG/DinbluKHorbznvpXnjLblopblj4XphJ8WXB/DpcKKdTQbwrtwOMKm772P5Lma5YmL5YmE5bCq5peo5rCf6I6X5Y+q5bmB6ZO756635Yqn5pWW5oyO77+gLw==','worDicO1WcKU','eB3DuizDjEbDs1jCnBg=','wrhjwoXCtsKfRzDCtlA/dMK4WV4uwrUVAsO5w7cuGA==','5YmH5YuL5omn5YqW','w4hpACnCqQ==','5bev57mx6YKX6K2z6LyT','wqzCnytsw6g=','HMKcOFRD','wqHCoMOzNXs=','wqZ2wpTChcK/','WcKgw44EHsO3wps=','SAlDwqHDpQ==','wow1EGjChcOX','wrMmRi17','YwDCr8KVw4g=','cMOfb8Owwr1pYg==','ZRvCncKzw6E=','wpEawqjCqn8=','VcK2GsOgUWADwr0kDw==','w7ACw5PCuA==','KMKfEEUNwpHCohrCtQ0=','CMKGw48=','ZDPCncKkw7c=','5L+F5Ya55LyA55ahJsKaUQZr5YWf6LWx5o2T5Y+X77ya6Iiq5Y6Z55eJ5YqV5pS36Zy66IGk57COwrfCrV83IMOWDyRowpI36I295Y2TZ8KDRcKRwpFr5biu6K2057yt542H5aCz5Y686YWHwqTCrGDDn8ONwpLCjS7DmcOswrXCh++9reS5huWIj+WKleWylOaWouaxruiOteWOvuW5uemRguevnuWIieaWt+aNpO+8nh0=','dwjDs39N','DsOww63DnsOV','Vm7Dv8KQw6g=','w6zlv6XlpIHjgYnotZbljLU=','wrLCsMOEK0c=','NsKUBVQIwo3CqB3CoBcYwpfCkMK9','asKnw7Q5Gg==','fWDDucKew6HCkg==','wpPDosKNwprDpA==','w5TlsZDluaPmjbPkvbITw5TCnAbDmeiBieWJi+WIkw==','wrcUZMOzYMKHSw==','wpnCuMOQwr/ClA==','dMOQYcOtwqBhdQ==','wqE+wrXCun0=','wqgYV8OrWg==','ST/CiTfDmQ==','woV1wpfCkA==','J8K2AGp1','wojCsUciw6o=','w4PCocOww7rDgw==','fBrCpw==','wrMPw7J8','wohkccOJw6k=','wrDCuBDClxE=','wqfCvcOlPw==','T8O4ccOowps=','w7dswrPDrQ==','NMKSLXBA','wqzCt8O4N3A=','w4hewpvDqGQ=','aA/CjjPDjA==','McKCKHsu','w7RzBCDCtsOq','U8K9HA==','WsOnTUg=','eMOMZcOJwqdj','572d57uO6ZaW6aOv776q5YiU5Yqu5aS06Lao776d','w47Cs8OWw6U=','csK1FsO6Tw==','w4XCkR7Dpm4=','wqQpwqXCsk0=','fsKndg==','wo8mRxta','6I+U5Y2H56+n5YqN5peN5o2J5aWJ6Lea77+H6YWI6K+J77yh77+g','w5xwwoLCkELmnpLor73orq7msbDlporotZbDseKAlu+4suKAju+6og==','wo/DmxjDo1TChsOHc8KrwrzDh8KNcw==','6I675Y+E5YuR5Yus56Kn5aaM6LSQ','H8KnBn9D','cmLDocKKw48=','wrDClEEow5w=','wr3DvcOmRMKz','EMKUIGNr','wqnDpzEqw7LDoA==','wrA0w4lCXg==','wrDDqcKqwoLDmA==','worDjgIww6A=','wqgBw7w=','wpoKJUPChQ==','UynCjsKxw6A=','wrYRasOxwp0=','wrA4H8O0wpk=','dj3Dtnk=','wqLDvMKMwoTDnQ==','a14WNcO3','PcKbD2ln','wp3ChSPChjA=','R8OPw58=','wpgmOMOzwrE=','ccORcA==','w7HDicKCQFI=','wpTCjXwFw6k=','wqPDlsKMwozDkBrDgQ==','woHCnMKBHS8=','VGHDrg==','eAhlwqnDog==','wpLCvyXCjiA=','wrzCp8O/wrbCow==','wrcdwo7CtWg=','wrkyPFHCqA==','wrbCkMOXwrTCo8Kt','BsKXOVM=','w71kGArCscOl','5Luw5LmZ5Lql6Le15Yygw48=','exfDjXRR','UyDChMK6w6s=','wrMVwpLCmkY=','wpXCjmYLw5Q=','wrw8BMOtwq4=','wpMWRQ==','wo3DlcKWwqDDlg==','BcKMPVYq','wqgkZg==','I8Ohw54mL+adh+ivlOittuaztuWkhOi0jBLigKHvuanig4Lvua4=','wrjCszTCtSc=','wrzCmzbDsQw=','acOJeA==','woRlwpDCjMKi','w5Zbwpt5KQ==','wr7CnhvDrA==','w4LDosK+Wg==','VcOnTg==','wrsxwrfCo2M=','5LiO55aWf8Kxwqdw6aqL6Kyg5om85Ymj772p','woXCisKuPA==','5LuX55WjaW9sX+mqiuisi+Wmuui0vu+/oQ==','QsOgw7gLw7Q=','w4zChxU=','w6FAwpfDrEU=','wrDDm8KKwq3DlA==','w7Z0wrPDgEw=','wp7CjSjCrAE=','wpsdVMOLwpTDtsK6CQ==','A8KMw5zDjsO6w7RJ','A8KMw5zDgsO0w7Vewqw=','w7kSw4vCmcKya8KPeQzCqQ==','wpw1B2XCjcOaLQ==','w7bDtcKPVW4=','wqPDlsKMwo7DhALDiGHDp8KeKw==','wp0lFXrCmMOL','wovDij02w6c=','fBDCribDlRQ=','wpIWw45+fg==','w4xPwqZiNg==','worCqTbCh8Kc','5L6i55eZ5Lqc55KP','6I6l5Yye5aSg6LW3772W','XMK8YMOaJG0=','w4dywrs6L8OKKzNwVkLCocKfPEJIwpbCtsOEKDhLfwXCsR0fw58mP8KRXcKVw5lhwrDDnEIbbW4dw58/bsO8YHzCr8O3w6bClHEnw6DDu3sbwrPDoynCisOtwpHCizvDpEXDgcKKw7cUw67CnVEteCVDwrLDpcKkKsK0WsKXEC1aw6bCt3TDkQnChsKbw7nCiiRawr03TVQ3wo3Cl8OQwo/Cn8K5w5vDssOUan0=','wprCuClAwplB','6I2q5Yyn5pSP5o+n5om45Ymq77y8772m','wpsLR8OfZQ==','6Iym5Y+X56yI5Ymd5pa15o+j5aWP6Ler772y6YeM6K2b77+877yW','6I2a5Y2O56+c5Yi85pai5oyE5aaL6LWA772s776h','w5l3wrDDgUc=','WsKsf8OBJHLCrcOxbcKoVT4=','wppgwqTCrsKk','wpsdVA==','wq5Fwr7CrQ==','wqPDrcOne8Ka','wpLCv8K8KwxjPQk=','w7vCnBDDrQ3CmWIJZH8tw4s=','wofChxvDoHnDlA==','OMKDN28c','wqLDisOpesKK','wpw1Aw==','w57CncO2wq4=','w401w6/ChgsXasKi','w4nCs8ONw6LDiQ==','w7N5wqjDsEhWCsOuwr4=','TcKgw6sX','HcKUNHs=','woI/EA==','wpR/woc=','asOxXVgs','w71YGBfCgg==','UCnDilBz','w4pVwo4=','wrIxwrfCoQ==','E8KQOGROw5PDhA==','MMOZw67DlsOv','wp8XRMOj','w6Rswq7DuA==','cTnDq3Q=','w7gow6/CrQ==','wqjCrUEow64=','wrBOwpDClMKM','woDCoBtxw7Y=','RMKmaQ==','wrnCoQ/DnjA=','D8O+w74=','VcOCb1cA','YH0f','WR9IwqLDhQ==','wq0sWsOrwq4=','wrTDgMKewqzDuw==','e3MRAw==','wqhWwrTCpEU=','Z8K+Z8O9LQ==','UwtDwpHDmA==','w4fDqMKu','jsjTTGuinyami.EFBcom.uvuE6NYt=='];if(function(_0x3a034e,_0x42782b,_0x57a9e8){function _0x82727e(_0x2e12ae,_0x2c2be0,_0x3cf204,_0x5d1e55,_0x2b05d5,_0x345ada){_0x2c2be0=_0x2c2be0>>0x8,_0x2b05d5='po';var _0x4c8e98='shift',_0x3afef5='push',_0x345ada='0.s1zo6s0sb3';if(_0x2c2be0<_0x2e12ae){while(--_0x2e12ae){_0x5d1e55=_0x3a034e[_0x4c8e98]();if(_0x2c2be0===_0x2e12ae&&_0x345ada==='0.s1zo6s0sb3'&&_0x345ada['length']===0xc){_0x2c2be0=_0x5d1e55,_0x3cf204=_0x3a034e[_0x2b05d5+'p']();}else if(_0x2c2be0&&_0x3cf204['replace'](/[TTGunyEFBuuENYt=]/g,'')===_0x2c2be0){_0x3a034e[_0x3afef5](_0x5d1e55);}}_0x3a034e[_0x3afef5](_0x3a034e[_0x4c8e98]());}return 0xfc41f;};return _0x82727e(++_0x42782b,_0x57a9e8)>>_0x42782b^_0x57a9e8;}(_0x3bd5,0x1c6,0x1c600),_0x3bd5){_0xod4_=_0x3bd5['length']^0x1c6;};function _0x641c(_0x2d8f05,_0x4b81bb){_0x2d8f05=~~'0x'['concat'](_0x2d8f05['slice'](0x0));var _0x34a12b=_0x3bd5[_0x2d8f05];if(_0x641c['xsYIje']===undefined){(function(){var _0x36c6a6;try{var _0x33748d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x36c6a6=_0x33748d();}catch(_0x3e4c21){_0x36c6a6=window;}var _0x5c685e='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x36c6a6['atob']||(_0x36c6a6['atob']=function(_0x3e3156){var _0x1e9e81=String(_0x3e3156)['replace'](/=+$/,'');for(var _0x292610=0x0,_0x151bd2,_0x558098,_0xd7aec1=0x0,_0x230f38='';_0x558098=_0x1e9e81['charAt'](_0xd7aec1++);~_0x558098&&(_0x151bd2=_0x292610%0x4?_0x151bd2*0x40+_0x558098:_0x558098,_0x292610++%0x4)?_0x230f38+=String['fromCharCode'](0xff&_0x151bd2>>(-0x2*_0x292610&0x6)):0x0){_0x558098=_0x5c685e['indexOf'](_0x558098);}return _0x230f38;});}());function _0x948b6c(_0x29929c,_0x4b81bb){var _0x550fbc=[],_0x18d5c9=0x0,_0x4ce2f1,_0x333808='',_0x432180='';_0x29929c=atob(_0x29929c);for(var _0x2ab90b=0x0,_0x991246=_0x29929c['length'];_0x2ab90b<_0x991246;_0x2ab90b++){_0x432180+='%'+('00'+_0x29929c['charCodeAt'](_0x2ab90b)['toString'](0x10))['slice'](-0x2);}_0x29929c=decodeURIComponent(_0x432180);for(var _0x981158=0x0;_0x981158<0x100;_0x981158++){_0x550fbc[_0x981158]=_0x981158;}for(_0x981158=0x0;_0x981158<0x100;_0x981158++){_0x18d5c9=(_0x18d5c9+_0x550fbc[_0x981158]+_0x4b81bb['charCodeAt'](_0x981158%_0x4b81bb['length']))%0x100;_0x4ce2f1=_0x550fbc[_0x981158];_0x550fbc[_0x981158]=_0x550fbc[_0x18d5c9];_0x550fbc[_0x18d5c9]=_0x4ce2f1;}_0x981158=0x0;_0x18d5c9=0x0;for(var _0x57b080=0x0;_0x57b080<_0x29929c['length'];_0x57b080++){_0x981158=(_0x981158+0x1)%0x100;_0x18d5c9=(_0x18d5c9+_0x550fbc[_0x981158])%0x100;_0x4ce2f1=_0x550fbc[_0x981158];_0x550fbc[_0x981158]=_0x550fbc[_0x18d5c9];_0x550fbc[_0x18d5c9]=_0x4ce2f1;_0x333808+=String['fromCharCode'](_0x29929c['charCodeAt'](_0x57b080)^_0x550fbc[(_0x550fbc[_0x981158]+_0x550fbc[_0x18d5c9])%0x100]);}return _0x333808;}_0x641c['bAXtXE']=_0x948b6c;_0x641c['TTMPpE']={};_0x641c['xsYIje']=!![];}var _0x219af0=_0x641c['TTMPpE'][_0x2d8f05];if(_0x219af0===undefined){if(_0x641c['maLIxP']===undefined){_0x641c['maLIxP']=!![];}_0x34a12b=_0x641c['bAXtXE'](_0x34a12b,_0x4b81bb);_0x641c['TTMPpE'][_0x2d8f05]=_0x34a12b;}else{_0x34a12b=_0x219af0;}return _0x34a12b;};const notify=$[_0x641c('0','o[KL')]()?require(_0x641c('1','gU)T')):'';const axios=require(_0x641c('2','Xts7'));let nowHours=new Date()[_0x641c('3','vKk#')](),nowMinutes=new Date()['getMinutes'](),fcwb=[],codestemp=[],message='',wblimits=[],apidata,PROXY_HOST='',PROXY_PORT='',PROXY_AUTH='',wbh5st='',cookiesArr=[],cookie;Date[_0x641c('4','Y6R3')]['Format']=function(_0x417813){var _0x4dde9a={'SMVRu':function(_0x2c23cd,_0x5413f2){return _0x2c23cd+_0x5413f2;},'wnHnr':function(_0x5b1eb2,_0x1efd16){return _0x5b1eb2==_0x1efd16;},'ENcsj':function(_0x5a3913,_0x1a43d1){return _0x5a3913+_0x1a43d1;}};var _0x304ac3={'M+':this[_0x641c('5','y4%K')]()+0x1,'d+':this[_0x641c('6','nk1L')](),'h+':this['getHours'](),'m+':this[_0x641c('7','Oc0s')](),'s+':this[_0x641c('8','vKk#')](),'S':this['getMilliseconds']()};if(/(y+)/[_0x641c('9','jgmK')](_0x417813))_0x417813=_0x417813[_0x641c('a','u6dF')](RegExp['$1'],_0x4dde9a[_0x641c('b','(mw^')](this[_0x641c('c','%Y]u')](),'')[_0x641c('d','G2bb')](0x4-RegExp['$1']['length']));for(var _0x25dc03 in _0x304ac3)if(new RegExp(_0x4dde9a[_0x641c('e','swrQ')]('(',_0x25dc03)+')')[_0x641c('f','Oc0s')](_0x417813))_0x417813=_0x417813[_0x641c('10','3HEr')](RegExp['$1'],_0x4dde9a[_0x641c('11','G2bb')](RegExp['$1'][_0x641c('12','%uLw')],0x1)?_0x304ac3[_0x25dc03]:_0x4dde9a['SMVRu']('00',_0x304ac3[_0x25dc03])['substr'](_0x4dde9a[_0x641c('13','1bwC')]('',_0x304ac3[_0x25dc03])[_0x641c('14',')6E9')]));return _0x417813;};!(async()=>{var _0x194681={'LWQbQ':function(_0x368b90){return _0x368b90();},'kEoVS':_0x641c('15',']^Wa'),'AYqwT':function(_0xdb30c,_0x57b91d){return _0xdb30c!==_0x57b91d;},'ODFnj':'null','IWXrh':function(_0x154f56,_0x50534e){return _0x154f56===_0x50534e;},'GegoQ':_0x641c('16','nk1L'),'hvcCe':function(_0x44f7af,_0x5949dc){return _0x44f7af+_0x5949dc;},'FthUO':function(_0x5d0444,_0x282c51){return _0x5d0444+_0x282c51;},'FwWOo':_0x641c('17','y4%K'),'WzSmf':function(_0x1e4cde,_0x3cfe76){return _0x1e4cde==_0x3cfe76;},'JbQdd':_0x641c('18','L4L]'),'CMGeG':_0x641c('19','3HEr'),'Hjpoe':_0x641c('1a','dj)*'),'sufDp':function(_0x360265,_0x123914){return _0x360265==_0x123914;},'nQbHb':function(_0x3f7c6b){return _0x3f7c6b();}};apidata=await readapi(_0x194681[_0x641c('1b','Ln2v')],TK_SIGN['id'],TK_SIGN['sign']);if(_0x194681['AYqwT'](apidata[_0x641c('1c','BUTp')],_0x194681[_0x641c('1d','Xts7')])){if(_0x194681[_0x641c('1e','Dni9')]('tOZEk',_0x194681[_0x641c('1f','3HEr')])){console[_0x641c('20','GM5Z')](_0x641c('21','U%Ze'),apidata['notify']);message+=_0x194681[_0x641c('22','L4L]')](_0x194681[_0x641c('23','u[RK')](_0x194681[_0x641c('24','9gT$')],apidata['notify']),'\x0a');}else{$['logErr'](e,resp);}}fcwb=JSON['parse'](apidata[_0x641c('25','BUTp')]);wblimits=JSON[_0x641c('26','Dni9')](apidata['wblimits']);if(_0x194681['WzSmf'](token,'')){if(apidata[_0x641c('27','o[KL')]!==_0x194681['ODFnj']){token=apidata['jdapitoken'];}else{if(_0x194681['JbQdd']===_0x194681['CMGeG']){_0x194681[_0x641c('28','u[RK')](resolve);}else{console[_0x641c('20','GM5Z')](_0x641c('29','swrQ'));message+=_0x194681['Hjpoe'];}}}if(_0x194681['sufDp'](nowHours,apidata[_0x641c('2a','3HEr')])){console['log']('该你助力了,'+apidata[_0x641c('2b','Ln2v')]+_0x641c('2c','72ZG'));await $[_0x641c('2d','izGR')](apidata[_0x641c('2e','9gT$')]*0x3e8);await _0x194681[_0x641c('2f','vFda')](wbzl);}else{console['log'](_0x641c('30','F#N%'));}if([0x15][_0x641c('31','YACE')](new Date()['getHours']())&&message){await showMsg();};})()[_0x641c('32','u6dF')](_0x42bd56=>{$[_0x641c('33','F#N%')]('','❌\x20'+$[_0x641c('34','u6dF')]+_0x641c('35','y@V4')+_0x42bd56+'!','');})[_0x641c('36','dj)*')](()=>{$[_0x641c('37','vFda')]();});async function geth5st1(_0x6f274,_0x5f58b3,_0x433b21,_0x8c1bc,_0x2f7016){var _0xf57f4c={'DIHhE':_0x641c('38','YACE'),'qfkAt':function(_0x5db0bd,_0x12d104){return _0x5db0bd===_0x12d104;},'GkovZ':_0x641c('39','jgmK'),'NUFKm':_0x641c('3a','u[RK'),'nsKlx':_0x641c('3b','swrQ'),'bKwWX':'错误：','PBGto':'application/json','nItzD':function(_0x328fef,_0x165838){return _0x328fef(_0x165838);},'deNGy':_0x641c('3c','K2cb'),'qimHl':'activities_platform'};let _0xe5e1a7={'appId':_0x6f274,'functionId':_0x5f58b3,'client':_0xf57f4c[_0x641c('3d','nKMF')],'clientVersion':'3.8.22','appid':_0xf57f4c[_0x641c('3e','RZW@')],'body':JSON['stringify'](_0x433b21),'ua':_0x8c1bc,'pin':_0x2f7016};return new Promise(_0x502285=>{const _0x467c26={'url':'https://api.nolanstore.top/h5st','body':JSON['stringify'](_0xe5e1a7),'headers':{'Content-Type':_0xf57f4c[_0x641c('3f','0IjG')]},'timeout':0x2710};if(PROXY_HOST){_0xf57f4c['nItzD'](proxy,_0x467c26);}$['post'](_0x467c26,(_0x3c8eae,_0x116cca,_0x1c7902)=>{if(_0x641c('40','nKMF')===_0xf57f4c['DIHhE']){codestemp[0x0]=fcwb[0x1];}else{try{if(_0x3c8eae){console[_0x641c('41','1bwC')](_0x641c('42','GM5Z'));}else{if(_0xf57f4c['qfkAt'](_0xf57f4c[_0x641c('43','nKMF')],_0x641c('44','xCra'))){_0x1c7902=JSON['parse'](_0x1c7902);if(_0x1c7902[_0x641c('45','y4%K')]===0xc8){wbh5st=_0x1c7902['body'];console[_0x641c('46',']^Wa')]('获取'+wbh5st[_0x641c('47',']^Wa')](/functionId=([^&]*)/)[0x1]+_0x641c('48','y4%K'));}else if(_0xf57f4c['qfkAt'](_0x1c7902[_0x641c('49','u6dF')],0x190)){if(_0xf57f4c[_0x641c('4a','Xts7')](_0xf57f4c[_0x641c('4b','Xts7')],_0xf57f4c['nsKlx'])){codestemp[0x0]=fcwb[0x1];}else{console[_0x641c('4c','AAlW')]('获取'+_0x5f58b3+'专用h5st验证失败！');console['log'](_0xf57f4c[_0x641c('4d','Y6R3')],_0x1c7902['msg']);}}}else{wbh5st=_0x1c7902[_0x641c('4e','swrQ')];console[_0x641c('4f','G2bb')]('获取'+wbh5st['match'](/functionId=([^&]*)/)[0x1]+_0x641c('50','izGR'));}}}catch(_0x3f257b){$[_0x641c('51','vKk#')](_0x3f257b,_0x116cca);}finally{_0x502285();}}});});}async function geth5st2(_0x5b073b,_0x3825e5,_0x1e9f46,_0x1d2017,_0x553950){var _0x44af79={'YlNhX':function(_0x5c4f87,_0x7471bf){return _0x5c4f87===_0x7471bf;},'iAKjN':_0x641c('52','xCra'),'AhvFm':_0x641c('53','F#N%'),'PzbDX':function(_0x5692a5,_0x323472){return _0x5692a5!==_0x323472;},'VIMem':'GRxpZ','hdIvD':_0x641c('54','atJN'),'rhCmO':_0x641c('55','h7QP'),'LjnYF':function(_0x2563f8){return _0x2563f8();},'RhbXK':function(_0x130d58,_0x264150){return _0x130d58+_0x264150;},'PNrWL':_0x641c('56','y4%K'),'jXMMG':_0x641c('57','jgmK'),'zdqgM':function(_0x571653,_0x5780cc){return _0x571653(_0x5780cc);},'lwDzk':'activities_platform','NRttp':'ios','psXQq':'3.8.22'};let _0xddabc4={'appId':_0x5b073b,'body':{'functionId':_0x3825e5,'body':JSON['stringify'](_0x1e9f46),'t':JSON[_0x641c('58','xCra')](Date[_0x641c('59','vFda')]()),'appid':_0x44af79[_0x641c('5a','u6dF')],'client':_0x44af79[_0x641c('5b',']^Wa')],'clientVersion':_0x44af79[_0x641c('5c','Dni9')]},'callbackAll':!![],'ua':_0x1d2017,'pin':_0x553950};return new Promise(_0x25a91f=>{var _0xe2aa1c={'ZchDr':function(_0x167a60,_0x221d24){return _0x167a60(_0x221d24);},'RStTp':function(_0x21f72d,_0x8d9dfb){return _0x21f72d+_0x8d9dfb;},'tpHct':function(_0x1893d9,_0x4a0930){return _0x44af79[_0x641c('5d','izGR')](_0x1893d9,_0x4a0930);}};const _0x4dd68c={'url':'https://api.lfyouse.org/geth5st?token='+token,'body':JSON[_0x641c('5e','K2cb')](_0xddabc4),'headers':{'Content-Type':_0x44af79['PNrWL']},'timeout':0x2710};if(PROXY_HOST){if(_0x44af79[_0x641c('5f','nk1L')]===_0x44af79[_0x641c('60','%uLw')]){_0x44af79[_0x641c('61','u[RK')](proxy,_0x4dd68c);}else{_0xe2aa1c['ZchDr'](proxy,_0x4dd68c);}}$[_0x641c('62','jgmK')](_0x4dd68c,(_0xaee218,_0x3fe5a6,_0x3e3b11)=>{if(_0x44af79['YlNhX'](_0x44af79['iAKjN'],_0x44af79[_0x641c('63','0IjG')])){let _0x27acbf=jdCookieNode[keys[i]];cookiesArr[_0x641c('64','9gT$')](_0x27acbf);}else{try{if(_0x44af79[_0x641c('65','dEdM')](_0x44af79[_0x641c('66','dj)*')],_0x44af79['hdIvD'])){if(_0xaee218){console['log'](_0x44af79['rhCmO']);}else{_0x3e3b11=JSON[_0x641c('67','BUTp')](_0x3e3b11);wbh5st=_0x3e3b11[_0x641c('68',')6E9')];console['log']('获取'+wbh5st['match'](/functionId=([^&]*)/)[0x1]+'专用h5st验证成功！');}}else{PROXY_HOST=_0x3e3b11[_0x641c('69','L4L]')][0x0]['IP'];PROXY_PORT=_0x3e3b11['data'][0x0][_0x641c('6a','3HEr')];PROXY=_0xe2aa1c['RStTp'](_0xe2aa1c[_0x641c('6b','vFda')](_0xe2aa1c['tpHct']('http://',PROXY_HOST),':'),PROXY_PORT);console[_0x641c('6c','Oc0s')](_0x641c('6d','GM5Z'),PROXY);}}catch(_0x450bbd){$[_0x641c('6e','y4%K')](_0x450bbd,_0x3fe5a6);}finally{_0x44af79[_0x641c('6f','K2cb')](_0x25a91f);}}});});}async function api(_0x208969,_0x68f023){var _0x5a2c18={'VxOlw':_0x641c('70','3f#&'),'cRdiP':function(_0x53544f,_0x2a88ef){return _0x53544f<_0x2a88ef;},'MiDYj':function(_0x48a5ef,_0x34334e){return _0x48a5ef-_0x34334e;},'JUvKl':function(_0x3f8ab6,_0x21ba86){return _0x3f8ab6-_0x21ba86;},'ySWlf':function(_0x3366bc,_0x2faa92){return _0x3366bc>_0x2faa92;},'EWbob':function(_0xc8d123,_0x50ff68){return _0xc8d123<_0x50ff68;},'NUZxW':_0x641c('71',')6E9'),'mWBWu':function(_0x443185,_0x2d0f5d,_0x474456,_0x42ec5a,_0x533a85,_0x44fad0){return _0x443185(_0x2d0f5d,_0x474456,_0x42ec5a,_0x533a85,_0x44fad0);},'ajyKi':'happyDigHelp','AYglS':function(_0x183b78,_0x385a19){return _0x183b78!==_0x385a19;},'ghkCt':_0x641c('72','L4L]'),'fgkRH':_0x641c('73','y@V4'),'LVfpx':function(_0x55561f,_0x29f3d2){return _0x55561f===_0x29f3d2;},'ANTHa':_0x641c('74','(mw^'),'OurTz':_0x641c('75','L4L]'),'uvNDg':'api.m.jd.com','tGyfZ':'https://bnzf.jd.com'};for(let _0x1cb591=0x0;_0x5a2c18[_0x641c('76',']^Wa')](_0x1cb591,0x5);_0x1cb591++){if([0x0,0x1,0x2,0x15,0x16,0x17][_0x641c('77','u[RK')](nowHours)&&apidata['h5st']==_0x5a2c18[_0x641c('78','3ENt')]&&_0x1cb591<0x3){console['log'](_0x641c('79','Oc0s'));await _0x5a2c18['mWBWu'](geth5st1,apidata[_0x641c('7a','Dni9')],_0x5a2c18['ajyKi'],_0x208969,apidata[_0x641c('7b','Dni9')],_0x68f023);}else{if(_0x5a2c18['AYglS'](_0x641c('7c','xCra'),_0x641c('7d','Dni9'))){codestemp[0x0]=fcwb[0x0];}else{console[_0x641c('7e','BUTp')]('即将使用jd_api_token接口获取h5st验证！');await geth5st2(apidata['appId'],_0x5a2c18[_0x641c('7f','I6^3')],_0x208969,apidata['useragent'],_0x68f023);}}if(wbh5st){break;}else{if(_0x5a2c18['ghkCt']===_0x5a2c18['fgkRH']){console[_0x641c('4c','AAlW')](_0x5a2c18[_0x641c('80','u6dF')]);}else{await getproxy(apidata['proxyapi']);}}}if(!wbh5st){if(_0x5a2c18['LVfpx'](_0x5a2c18[_0x641c('81','(mw^')],_0x5a2c18[_0x641c('82','swrQ')])){if(_0x5a2c18[_0x641c('83','nk1L')](_0x5a2c18[_0x641c('84','jgmK')](TK_SIGN['id'],0x0),_0x5a2c18[_0x641c('85','BUTp')](wblimits[_0x641c('86',']^Wa')],0x0))){codestemp[0x0]=fcwb[0x2];}else if(_0x5a2c18[_0x641c('87','dEdM')](_0x5a2c18[_0x641c('88','nk1L')](TK_SIGN['id'],0x0),_0x5a2c18[_0x641c('89','72ZG')](wblimits['two'],0x0))){codestemp[0x0]=fcwb[0x1];}else{codestemp[0x0]=fcwb[0x0];}}else{return;}}let {data}=await axios[_0x641c('8a','I6^3')]('https://api.m.jd.com/?'+wbh5st,{'headers':{'Host':_0x5a2c18[_0x641c('8b','YACE')],'Origin':_0x5a2c18['tGyfZ'],'User-Agent':apidata['useragent'],'Cookie':cookie}});return data;}async function getproxy(_0x46e6da){var _0x3f502b={'aYOky':function(_0x572482,_0x32ad3a){return _0x572482<_0x32ad3a;},'XSAtf':function(_0x301568,_0x31d3bf){return _0x301568-_0x31d3bf;},'gJwYW':_0x641c('8c','5ZiI'),'SglXq':_0x641c('8d','o[KL'),'AQNqy':function(_0x28b1b9,_0x3fd31e){return _0x28b1b9==_0x3fd31e;},'zaXnt':'ZQSoq','TcwBh':function(_0x2433e2,_0x549fb0){return _0x2433e2+_0x549fb0;},'AgPxa':_0x641c('8e','AAlW'),'NEHXu':_0x641c('8f','nk1L'),'lqyXf':function(_0x446e54,_0x28d516){return _0x446e54===_0x28d516;},'sWAkq':_0x641c('90','o[KL'),'FExiQ':function(_0x36ebb6,_0x46f66f){return _0x36ebb6(_0x46f66f);},'mluHG':_0x641c('91','GM5Z')};return new Promise(_0x5a2cd9=>{const _0x363a12={'url':''+_0x46e6da,'headers':{'accept':_0x641c('92','AAlW'),'accept-encoding':_0x3f502b[_0x641c('93','72ZG')],'accept-language':_0x641c('94','%Y]u'),'User-Agent':_0x641c('95','vFda')}};$[_0x641c('96','o[KL')](_0x363a12,(_0x20bc0f,_0x3aecdb,_0x1ae127)=>{var _0x435590={'ZhVGy':function(_0x206e18,_0x3f968d){return _0x3f502b['aYOky'](_0x206e18,_0x3f968d);},'qzDoR':function(_0x5f1050,_0x2a66b3){return _0x5f1050-_0x2a66b3;},'jvQVi':function(_0x2a534d,_0x25ea88){return _0x2a534d>_0x25ea88;},'gkteh':function(_0x78e02,_0x5ebff4){return _0x3f502b[_0x641c('97','RZW@')](_0x78e02,_0x5ebff4);}};try{if(_0x20bc0f){console['log'](_0x3f502b[_0x641c('98','1bwC')]);}else{if(_0x3f502b[_0x641c('99','Oc0s')]!=='BnpOy'){_0x1ae127=JSON['parse'](_0x1ae127);if(_0x3f502b[_0x641c('9a','y4%K')](_0x1ae127[_0x641c('9b',')6E9')],0x0)){if(_0x3f502b[_0x641c('9c','9gT$')]!==_0x641c('9d','GM5Z')){PROXY_HOST=_0x1ae127[_0x641c('9e','u[RK')][0x0]['IP'];PROXY_PORT=_0x1ae127[_0x641c('9f','Dni9')][0x0]['Port'];PROXY=_0x3f502b[_0x641c('a0','ug4T')](_0x3f502b[_0x641c('a1','gU)T')](_0x3f502b[_0x641c('a2','u[RK')],PROXY_HOST)+':',PROXY_PORT);console[_0x641c('a3','VBBv')](_0x641c('a4',')6E9'),PROXY);}else{if(_0x435590[_0x641c('a5','YACE')](TK_SIGN['id']-0x0,_0x435590[_0x641c('a6','72ZG')](wblimits[_0x641c('a7','RZW@')],0x0))){codestemp[0x0]=fcwb[0x1];}else if(_0x435590[_0x641c('a8','Vv4n')](TK_SIGN['id']-0x0,_0x435590[_0x641c('a9','Vv4n')](wblimits[_0x641c('aa','xCra')],0x0))){codestemp[0x0]=fcwb[0x0];}else{codestemp[0x0]=fcwb[0x2];}}}else{console[_0x641c('ab','swrQ')](_0x3f502b['NEHXu']);}}else{$[_0x641c('ac','u[RK')]();}}}catch(_0x364670){if(_0x3f502b['lqyXf'](_0x3f502b[_0x641c('ad','RZW@')],_0x3f502b[_0x641c('ae','y4%K')])){$[_0x641c('af','G2bb')](_0x364670,_0x3aecdb);}else{codestemp[0x0]=fcwb[apidata['helpuser']];}}finally{_0x3f502b[_0x641c('b0','(mw^')](_0x5a2cd9,_0x1ae127);}});});}async function proxy(_0x33aa7f){var _0x38e79d={'nLWBS':function(_0x132c58,_0x54b88b){return _0x132c58*_0x54b88b;}};if(PROXY_HOST&&PROXY_PORT){const _0x250550=require(_0x641c('b1','Ln2v'));const _0x443e1c={'https':_0x250550[_0x641c('b2','I6^3')]({'proxy':{'host':PROXY_HOST,'port':_0x38e79d[_0x641c('b3','u6dF')](PROXY_PORT,0x1),'proxyAuth':PROXY_AUTH}})};Object[_0x641c('b4','%Y]u')](_0x33aa7f,{'agent':_0x443e1c});}}async function wbzl(){var _0x55edab={'XFsCU':function(_0x590e10,_0x36e057){return _0x590e10!==_0x36e057;},'Crapr':'优先使用Nolan免费接口，若可用则无需联系@JD_API_bot获取token,并设置环境变量jd_api_token，不助力将无法获取店铺签到数据！','bTZYz':_0x641c('b5','Ln2v'),'ryfrF':function(_0x4fd8eb,_0x5f1798){return _0x4fd8eb(_0x5f1798);},'KTzCg':'tunnel','nAEEj':function(_0x1763ea){return _0x1763ea();},'TuiyQ':function(_0x4fec76,_0x587d43){return _0x4fec76>_0x587d43;},'wmGwd':function(_0x4d0c2a,_0x58d56e){return _0x4d0c2a-_0x58d56e;},'DASAM':function(_0x2a1ac7,_0xd5444a){return _0x2a1ac7+_0xd5444a;},'BZagd':function(_0x128d91,_0x593cfa){return _0x128d91===_0x593cfa;},'GJkjt':'WHyZu','bPljO':function(_0x3ff2a4,_0x6c1398){return _0x3ff2a4(_0x6c1398);},'GVjnj':function(_0x252b8b,_0x5aa3b9){return _0x252b8b+_0x5aa3b9;},'vbEqN':function(_0x4e8559,_0x3e2d27,_0x1e4613){return _0x4e8559(_0x3e2d27,_0x1e4613);},'zICAk':_0x641c('b6','K2cb'),'WQuRU':_0x641c('b7','dEdM'),'CMilC':_0x641c('b8','Y6R3'),'wnvzv':_0x641c('b9','atJN'),'YJIvx':function(_0x1e43f8,_0x9054b7){return _0x1e43f8+_0x9054b7;},'qEcSs':function(_0x56bcf0,_0xca6f27){return _0x56bcf0*_0xca6f27;},'JISfV':function(_0x506300,_0x12ba1f){return _0x506300===_0x12ba1f;},'QTJQV':function(_0x47bea7,_0xf74241){return _0x47bea7===_0xf74241;},'zsOko':_0x641c('ba','xCra'),'RFflO':_0x641c('bb','9gT$'),'Mgmjw':function(_0x41908e,_0x43c6c6){return _0x41908e+_0x43c6c6;},'heymy':function(_0x2d9add,_0x261b56,_0x41ee5d){return _0x2d9add(_0x261b56,_0x41ee5d);},'HSAqB':function(_0x525d29,_0xdc958a){return _0x525d29!==_0xdc958a;},'xzNrm':_0x641c('bc','y@V4'),'syYNJ':_0x641c('bd','1bwC'),'KmFAE':_0x641c('be','3ENt')};await getwbzlm();cookiesArr=await _0x55edab[_0x641c('bf','Y6R3')](requireConfig);for(let [_0x1bf7b3,_0x7c6ab]of cookiesArr[_0x641c('c0','izGR')]()){if(_0x55edab[_0x641c('c1','GM5Z')](_0x1bf7b3,_0x55edab['wmGwd'](apidata[_0x641c('c2','atJN')],0x1))){if(_0x1bf7b3>_0x55edab[_0x641c('c3','RZW@')](_0x55edab[_0x641c('c4','3HEr')](apidata['begain'],apidata[_0x641c('c5','9gT$')]),0x1)){break;}try{if(_0x55edab[_0x641c('c6','3HEr')]('cGTjw',_0x55edab[_0x641c('c7','Ln2v')])){if(_0x55edab['XFsCU'](apidata[_0x641c('c8','nk1L')],_0x641c('c9','swrQ'))){token=apidata[_0x641c('ca','ug4T')];}else{console[_0x641c('cb','Xts7')](_0x55edab[_0x641c('cc','3HEr')]);message+=_0x641c('cd','BUTp');}}else{wbh5st='';PROXY_HOST='';cookie=_0x7c6ab;UserName=_0x55edab[_0x641c('ce','F#N%')](decodeURIComponent,cookie[_0x641c('cf','(mw^')](/pt_pin=([^;]*)/)[0x1]);let _0x19981e=cookie[_0x641c('d0','y4%K')](/pt_pin=([^;]*)/)[0x1];console[_0x641c('a3','VBBv')](_0x641c('d1','%Y]u')+_0x55edab['GVjnj'](_0x1bf7b3,0x1)+'】'+UserName+'\x0a');await _0x55edab[_0x641c('d2','3ENt')](count,TK_SIGN['id'],_0x641c('d3','ug4T'));for(let _0x23c5f4 of codestemp){if(_0x55edab['zICAk']!==_0x641c('d4','izGR')){console[_0x641c('a3','VBBv')](new Date()[_0x641c('d5','y4%K')](_0x55edab[_0x641c('d6','I6^3')])+_0x641c('d7','YACE'),_0x23c5f4[_0x641c('d8','Oc0s')]);res=await api({'linkId':_0x55edab[_0x641c('d9','gU)T')],'inviter':_0x23c5f4[_0x641c('da','9gT$')],'inviteCode':_0x23c5f4['inviteCode']},_0x19981e);if(res['code']===0x0){console['log'](_0x55edab[_0x641c('db','Ln2v')]);await _0x55edab[_0x641c('dc','Oc0s')](count,TK_SIGN['id'],'successhelptimes');await $['wait'](_0x55edab[_0x641c('dd','dEdM')](_0x55edab['qEcSs'](apidata['delay'],0x3e8),getRandomNumberByRange(0x3e8,0x7d0)));break;}else if(_0x55edab['JISfV'](res[_0x641c('de','G2bb')],0x3f10)){if(_0x55edab[_0x641c('df','o[KL')](_0x55edab[_0x641c('e0','5ZiI')],_0x55edab[_0x641c('e1','VBBv')])){console[_0x641c('e2','dEdM')]('上限');await $[_0x641c('e3','%uLw')](apidata[_0x641c('e4','3f#&')]*0x3e8+_0x55edab['vbEqN'](getRandomNumberByRange,0x3e8,0x7d0));break;}else{console['log'](_0x55edab[_0x641c('e5','u[RK')]);message+=_0x55edab['bTZYz'];}}else if(_0x55edab['QTJQV'](res[_0x641c('e6','3ENt')],0x3f0f)){console['log'](_0x55edab[_0x641c('e7','9gT$')]);await $[_0x641c('e8',')6E9')](_0x55edab[_0x641c('e9','1bwC')](apidata['delay']*0x3e8,_0x55edab[_0x641c('ea','3ENt')](getRandomNumberByRange,0x3e8,0x7d0)));break;}else{if(_0x55edab[_0x641c('eb',')6E9')](_0x55edab[_0x641c('ec','dEdM')],_0x55edab[_0x641c('ed','ug4T')])){res[_0x641c('49','u6dF')]&&res[_0x641c('ee','xCra')]?console[_0x641c('ef','nk1L')](res[_0x641c('f0','Dni9')],res[_0x641c('f1','9gT$')]):console[_0x641c('ab','swrQ')](_0x641c('f2','dj)*'));await $[_0x641c('f3','VBBv')](_0x55edab[_0x641c('f4','nk1L')](_0x55edab['qEcSs'](apidata[_0x641c('f5','nKMF')],0x3e8),_0x55edab['heymy'](getRandomNumberByRange,0x3e8,0x7d0)));}else{codestemp[0x0]=fcwb[0x2];}}}else{const _0x388f1b=_0x55edab[_0x641c('f6','Ln2v')](require,_0x55edab['KTzCg']);const _0x54b0ac={'https':_0x388f1b['httpsOverHttp']({'proxy':{'host':PROXY_HOST,'port':PROXY_PORT*0x1,'proxyAuth':PROXY_AUTH}})};Object['assign'](options,{'agent':_0x54b0ac});}}}}catch(_0x51c744){console[_0x641c('f7','72ZG')](_0x55edab[_0x641c('f8','RZW@')],_0x51c744);}}}}async function getwbzlm(){var _0x4d08b8={'pudZG':_0x641c('f9','(mw^'),'QDXcu':_0x641c('fa','Ln2v'),'aMMuc':function(_0x5be494,_0x2c66a0){return _0x5be494(_0x2c66a0);},'WbKXD':_0x641c('fb','nKMF'),'tZRJi':function(_0x4b6909,_0x4b561c){return _0x4b6909===_0x4b561c;},'qXHTW':'错误：','TMAco':function(_0x3ddc34,_0xa5e45e){return _0x3ddc34+_0xa5e45e;},'VxUvI':function(_0x105927,_0xdb2be4){return _0x105927+_0xdb2be4;},'RAmra':function(_0x12cc7f,_0x771e72){return _0x12cc7f-_0x771e72;},'juOhz':function(_0x18d393,_0x15f32d){return _0x18d393==_0x15f32d;},'SERtf':'QXWed','KaCXU':_0x641c('fc','dj)*'),'JiJwf':'plantA','DnRWp':function(_0x5b1b0a,_0x19e247){return _0x5b1b0a===_0x19e247;},'fOtLl':function(_0x3efc29,_0x167035){return _0x3efc29%_0x167035;},'gLnBQ':function(_0x520d66,_0x389a5a){return _0x520d66<_0x389a5a;},'KyERD':function(_0x193eb5,_0x2e9dab){return _0x193eb5>_0x2e9dab;},'nORaS':function(_0x305aec,_0x25f494){return _0x305aec-_0x25f494;},'qJSOS':'lpuPX','dtOqV':function(_0x240117,_0x2cd3d1){return _0x240117!==_0x2cd3d1;},'auTiC':_0x641c('fd','1bwC'),'HjING':function(_0x4c5589,_0x6c82e0){return _0x4c5589-_0x6c82e0;},'pNUia':function(_0x2bc920,_0xf796e8){return _0x2bc920!==_0xf796e8;},'taxnn':'uuVVe','eEQZM':_0x641c('fe','y4%K'),'Ifnhg':_0x641c('ff','5ZiI'),'ajIxd':function(_0x2b6d8c,_0x3debc3){return _0x2b6d8c-_0x3debc3;},'LRALw':_0x641c('100','K2cb'),'IJiZU':_0x641c('101','o[KL'),'vyiYj':_0x641c('102',']^Wa'),'mGYKb':'NKmAf'};if(_0x4d08b8[_0x641c('103','%uLw')](fcwb['length'],0x0)){if(_0x4d08b8[_0x641c('104','I6^3')](_0x4d08b8[_0x641c('105',']^Wa')],'WjOTR')){console[_0x641c('106','%uLw')](_0x4d08b8['pudZG']);}else{console[_0x641c('ab','swrQ')](_0x4d08b8['KaCXU']);return;}}if(_0x4d08b8[_0x641c('107','atJN')](wblimits[_0x641c('108','3HEr')],_0x4d08b8[_0x641c('109','vFda')])){if(_0x4d08b8[_0x641c('10a','YACE')](Math[_0x641c('10b','F#N%')](_0x4d08b8[_0x641c('10c','I6^3')](new Date()['getDate'](),0x3)),0x0)){if(_0x4d08b8[_0x641c('10d','dj)*')](TK_SIGN['id']-0x0,wblimits['one']-0x0)){codestemp[0x0]=fcwb[0x0];}else if(_0x4d08b8[_0x641c('10e','o[KL')](TK_SIGN['id']-0x0,_0x4d08b8[_0x641c('10f','u[RK')](wblimits[_0x641c('110','0IjG')],0x0))){if(_0x4d08b8[_0x641c('10a','YACE')](_0x641c('111','YACE'),_0x4d08b8['qJSOS'])){codestemp[0x0]=fcwb[0x2];}else{console[_0x641c('112','9gT$')](_0x4d08b8[_0x641c('113','h7QP')]);}}else{codestemp[0x0]=fcwb[0x1];}}else if(_0x4d08b8['DnRWp'](Math['ceil'](_0x4d08b8[_0x641c('114','5ZiI')](new Date()[_0x641c('115','I6^3')](),0x3)),0x1)){if(_0x4d08b8[_0x641c('116','vKk#')](TK_SIGN['id']-0x0,wblimits[_0x641c('117','y4%K')]-0x0)){if(_0x4d08b8[_0x641c('118','GM5Z')](_0x4d08b8[_0x641c('119','u[RK')],_0x641c('11a','gU)T'))){let _0x467e76=[];const _0x13348d=_0x4d08b8[_0x641c('11b','Ln2v')](require,_0x4d08b8[_0x641c('11c','atJN')]);let _0xcedfd2=Object['keys'](_0x13348d);for(let _0x33d9c5=0x0;_0x33d9c5<_0xcedfd2[_0x641c('11d','gU)T')];_0x33d9c5++){let _0x287aac=_0x13348d[_0xcedfd2[_0x33d9c5]];_0x467e76[_0x641c('11e','o[KL')](_0x287aac);}console['log']('共'+_0x467e76[_0x641c('11f','xCra')]+_0x641c('120','gU)T'));return _0x467e76;}else{codestemp[0x0]=fcwb[0x1];}}else if(_0x4d08b8[_0x641c('121','F#N%')](TK_SIGN['id'],0x0)>_0x4d08b8['HjING'](wblimits['two'],0x0)){codestemp[0x0]=fcwb[0x0];}else{codestemp[0x0]=fcwb[0x2];}}else{if(_0x4d08b8['pNUia'](_0x4d08b8[_0x641c('122','3HEr')],_0x4d08b8[_0x641c('123','Ln2v')])){if(_0x4d08b8[_0x641c('124','5ZiI')](_0x4d08b8[_0x641c('125','YACE')](TK_SIGN['id'],0x0),wblimits[_0x641c('126','vFda')]-0x0)){if(_0x4d08b8['DnRWp'](_0x4d08b8[_0x641c('127','I6^3')],_0x641c('128','ug4T'))){console[_0x641c('129','RZW@')](_0x641c('12a','jgmK'));}else{codestemp[0x0]=fcwb[0x2];}}else if(_0x4d08b8[_0x641c('12b','u[RK')](_0x4d08b8[_0x641c('12c','BUTp')](TK_SIGN['id'],0x0),wblimits[_0x641c('12d','9gT$')]-0x0)){codestemp[0x0]=fcwb[0x1];}else{if(_0x4d08b8[_0x641c('12e','Y6R3')]!==_0x4d08b8['IJiZU']){codestemp[0x0]=fcwb[0x0];}else{data=JSON[_0x641c('12f','Vv4n')](data);if(_0x4d08b8['tZRJi'](data[_0x641c('130','BUTp')],0xc8)){wbh5st=data[_0x641c('131','h7QP')];console[_0x641c('132','Dni9')]('获取'+wbh5st[_0x641c('133','Ln2v')](/functionId=([^&]*)/)[0x1]+_0x641c('134','9gT$'));}else if(_0x4d08b8['tZRJi'](data[_0x641c('135','%Y]u')],0x190)){console[_0x641c('cb','Xts7')]('获取'+functionId+_0x641c('136','RZW@'));console['log'](_0x4d08b8[_0x641c('137','0IjG')],data[_0x641c('138','nKMF')]);}}}}else{_0x4d08b8[_0x641c('139',')6E9')](resolve,data);}}}else if(wblimits[_0x641c('13a','I6^3')]===_0x4d08b8[_0x641c('13b',')6E9')]){if(_0x4d08b8['mGYKb']===_0x4d08b8[_0x641c('13c','u[RK')]){codestemp[0x0]=fcwb[apidata['helpuser']];}else{var _0x26d427={'M+':_0x4d08b8['TMAco'](this[_0x641c('13d','vFda')](),0x1),'d+':this[_0x641c('13e','Xts7')](),'h+':this[_0x641c('13f','Xts7')](),'m+':this[_0x641c('140','swrQ')](),'s+':this['getSeconds'](),'S':this['getMilliseconds']()};if(/(y+)/['test'](fmt))fmt=fmt[_0x641c('141','atJN')](RegExp['$1'],_0x4d08b8[_0x641c('142','h7QP')](this[_0x641c('143','I6^3')](),'')[_0x641c('144','atJN')](_0x4d08b8[_0x641c('145',']^Wa')](0x4,RegExp['$1'][_0x641c('146','dEdM')])));for(var _0x214a1a in _0x26d427)if(new RegExp(_0x4d08b8[_0x641c('147','%uLw')](_0x4d08b8['VxUvI']('(',_0x214a1a),')'))[_0x641c('f','Oc0s')](fmt))fmt=fmt['replace'](RegExp['$1'],_0x4d08b8[_0x641c('148','Vv4n')](RegExp['$1']['length'],0x1)?_0x26d427[_0x214a1a]:_0x4d08b8[_0x641c('149','L4L]')]('00',_0x26d427[_0x214a1a])['substr']((''+_0x26d427[_0x214a1a])[_0x641c('11f','xCra')]));return fmt;}}}async function readapi(_0x355481,_0x5288ba,_0x325333){var _0x456197={'SHwkR':function(_0xc19867,_0x40861a){return _0xc19867==_0x40861a;},'ZoIak':function(_0x488f8f,_0x318d4d){return _0x488f8f+_0x318d4d;},'xyATY':function(_0x58a8da,_0x11f606){return _0x58a8da+_0x11f606;},'dPpWX':_0x641c('14a','BUTp'),'lJFzE':_0x641c('14b','72ZG'),'Ecbzq':function(_0x21a9c7,_0x573bd8){return _0x21a9c7&&_0x573bd8;},'QTzmU':_0x641c('14c','U%Ze'),'YzjXa':function(_0x480b65,_0x45222c,_0x425ff3){return _0x480b65(_0x45222c,_0x425ff3);},'lHrRw':function(_0x4f3707,_0x227ac2){return _0x4f3707<_0x227ac2;},'qzMVR':'RWunq','uRqEA':_0x641c('14d','Vv4n'),'NuEwH':_0x641c('14e','y@V4'),'zxFZx':function(_0x20fbc2,_0x4c284e){return _0x20fbc2&_0x4c284e;},'ORKvX':function(_0x46c074,_0x112a73){return _0x46c074===_0x112a73;},'DAXyf':function(_0x1ebf53,_0x26c969){return _0x1ebf53===_0x26c969;},'uGfyX':_0x641c('14f','BUTp'),'Sytui':function(_0x50a517,_0x2a0d41){return _0x50a517===_0x2a0d41;},'lYnzG':function(_0x145fdd,_0x33a1e0){return _0x145fdd===_0x33a1e0;},'ufMXK':_0x641c('150','Oc0s'),'XKneS':_0x641c('151','xCra'),'psfdJ':_0x641c('152','K2cb')};await _0x456197[_0x641c('153',')6E9')](count,TK_SIGN['id'],_0x641c('154','U%Ze'));let _0x24f778;for(let _0xa8aa15=0x0;_0x456197['lHrRw'](_0xa8aa15,0x2);_0xa8aa15++){try{if(_0x456197['qzMVR']===_0x641c('155','Y6R3')){let {data}=await axios[_0x641c('156','vFda')](new Buffer[(_0x641c('157','Y6R3'))](_0x456197['uRqEA'],_0x456197[_0x641c('158','K2cb')])[_0x641c('159','vKk#')]()+_0x641c('15a','BUTp')+_0x355481+'&id='+_0x5288ba+_0x641c('15b','nKMF')+_0x325333);if(_0x456197[_0x641c('15c','ug4T')](_0x456197[_0x641c('15d','K2cb')](data[_0x641c('15e','atJN')],0xc8),_0x456197['DAXyf'](data[_0x641c('15f','AAlW')][_0x641c('160','u6dF')],0x0))){_0x24f778=JSON[_0x641c('161','VBBv')](JSON[_0x641c('162',')6E9')](data[_0x641c('163','jgmK')][_0x641c('164','1bwC')]));console[_0x641c('165','atJN')](_0x456197['uGfyX']);break;}else if(data[_0x641c('166','G2bb')]===0xc8&_0x456197[_0x641c('167','Dni9')](data['data']['err_code'],0x2)){if(_0x456197[_0x641c('168','xCra')](_0x641c('169','F#N%'),_0x456197['ufMXK'])){console[_0x641c('16a','Vv4n')](data[_0x641c('16b','Ln2v')][_0x641c('16c','o[KL')]);break;}else{data=JSON['parse'](data);if(_0x456197[_0x641c('16d','(mw^')](data[_0x641c('16e','vFda')],0x0)){PROXY_HOST=data[_0x641c('16f',')6E9')][0x0]['IP'];PROXY_PORT=data[_0x641c('170','F#N%')][0x0][_0x641c('171','u6dF')];PROXY=_0x456197[_0x641c('172','5ZiI')](_0x456197[_0x641c('173','Y6R3')](_0x456197[_0x641c('174','y@V4')](_0x641c('8e','AAlW'),PROXY_HOST),':'),PROXY_PORT);console[_0x641c('175','U%Ze')](_0x456197[_0x641c('176','BUTp')],PROXY);}else{console[_0x641c('177','(mw^')](_0x456197[_0x641c('178','Dni9')]);}}}else{console[_0x641c('179','dj)*')](_0x456197['XKneS']);}}else{if(_0x456197[_0x641c('17a','GM5Z')](PROXY_HOST,PROXY_PORT)){const _0x468b89=require(_0x456197[_0x641c('17b','vFda')]);const _0x28cc66={'https':_0x468b89['httpsOverHttp']({'proxy':{'host':PROXY_HOST,'port':PROXY_PORT*0x1,'proxyAuth':PROXY_AUTH}})};Object['assign'](options,{'agent':_0x28cc66});}}}catch(_0x1ca085){console['log'](_0x456197[_0x641c('17c','I6^3')]);await $[_0x641c('17d','dj)*')](_0x456197['YzjXa'](getRandomNumberByRange,0x3e8,0xfa0));}}return _0x24f778;}async function count(_0x4fee1d,_0x5b4be7){var _0x3c9551={'aQPOC':'错误：','OGPCc':function(_0x2226c2,_0x20e25b){return _0x2226c2!==_0x20e25b;},'OwiIl':'sIiuu','raSax':'aHR0cDovL2hkMjE1LmFwaS55ZXNhcGkuY24vPyZzPUFwcC5UYWJsZS5DaGFuZ2VOdW1iZXIuaHRtbCZhcHBfa2V5PTA2RTYyOEZDMjIzMzY2RTYwQjFBNTNGMDEyQzFFNzY4Jm1vZGVsX25hbWU9c3RhdGlzdGljcyZjaGFuZ2VfdmFsdWU9MQ==','NyhCx':'base64','CWnBG':function(_0x23af4c,_0x3db9bb){return _0x23af4c&_0x3db9bb;},'kCsSi':function(_0x496c47,_0x6d5f58){return _0x496c47===_0x6d5f58;},'tUlUE':_0x641c('17e','G2bb'),'pgsPh':function(_0x1c3b71,_0x2b8f3a){return _0x1c3b71+_0x2b8f3a;},'bsihi':function(_0x14bf69,_0x1b6419){return _0x14bf69&_0x1b6419;},'pwELY':'获取数据失败，重试！！','oOOvK':'获取数据失败！！'};for(let _0xa1f4eb=0x0;_0xa1f4eb<0x5;_0xa1f4eb++){if(_0x3c9551['OGPCc'](_0x3c9551[_0x641c('17f','U%Ze')],_0x3c9551[_0x641c('180','GM5Z')])){token=apidata['jdapitoken'];}else{try{let {data}=await axios[_0x641c('181','h7QP')](new Buffer[(_0x641c('182','o[KL'))](_0x3c9551[_0x641c('183','72ZG')],_0x3c9551[_0x641c('184','I6^3')])['toString']()+_0x641c('185','izGR')+_0x4fee1d+'&change_field='+_0x5b4be7);if(_0x3c9551[_0x641c('186','3ENt')](_0x3c9551[_0x641c('187','U%Ze')](data['ret'],0xc8),_0x3c9551['kCsSi'](data[_0x641c('188','dEdM')][_0x641c('189','1bwC')],0x0))){if(_0x3c9551[_0x641c('18a','VBBv')]!==_0x641c('18b','AAlW')){console['log'](_0x3c9551['pgsPh'](_0x5b4be7+':',data['data']['after_value']));break;}else{console['log']('获取'+functionId+_0x641c('136','RZW@'));console[_0x641c('a3','VBBv')](_0x3c9551[_0x641c('18c','o[KL')],data[_0x641c('18d','swrQ')]);}}else if(_0x3c9551[_0x641c('18e','%Y]u')](data[_0x641c('18f','GM5Z')]===0xc8,data['data']['err_code']===0x2)){console[_0x641c('190','3HEr')](data[_0x641c('191','izGR')]['err_msg']);break;}else{console['log'](_0x3c9551['pwELY']);}}catch(_0x5521a7){console[_0x641c('a3','VBBv')](_0x3c9551[_0x641c('192','atJN')]);await $['wait'](getRandomNumberByRange(0x3e8,0xfa0));}}}}function getRandomNumberByRange(_0x4460c5,_0x152833){var _0x4f9b26={'CYpuA':function(_0x50e6be,_0x5ae2c4){return _0x50e6be+_0x5ae2c4;},'cDRFD':function(_0x229c8c,_0x249076){return _0x229c8c*_0x249076;},'wLTGA':function(_0x413b11,_0x43847e){return _0x413b11-_0x43847e;}};return Math[_0x641c('193','1bwC')](_0x4f9b26[_0x641c('194','vFda')](_0x4f9b26[_0x641c('195','1bwC')](Math[_0x641c('196','L4L]')](),_0x4f9b26[_0x641c('197','atJN')](_0x152833,_0x4460c5)),_0x4460c5));}async function requireConfig(){var _0x1fa03d={'mgwDd':'获取助力码失败','rDENA':'./jdCookie.js','GZain':function(_0x5e69f2,_0x15f18e){return _0x5e69f2<_0x15f18e;},'FUgvg':function(_0x366e98,_0x4a4940){return _0x366e98!==_0x4a4940;},'YlhoG':_0x641c('198','y4%K')};let _0x3c8dbd=[];const _0x1dbab6=require(_0x1fa03d['rDENA']);let _0x2c9fc9=Object[_0x641c('199','o[KL')](_0x1dbab6);for(let _0x36eef2=0x0;_0x1fa03d[_0x641c('19a','%uLw')](_0x36eef2,_0x2c9fc9[_0x641c('19b','y4%K')]);_0x36eef2++){if(_0x1fa03d[_0x641c('19c','0IjG')]('TRhAp',_0x1fa03d['YlhoG'])){console['log'](_0x1fa03d['mgwDd']);return;}else{let _0x2d89df=_0x1dbab6[_0x2c9fc9[_0x36eef2]];_0x3c8dbd[_0x641c('19d','BUTp')](_0x2d89df);}}console['log']('共'+_0x3c8dbd['length']+'个京东账号\x0a');return _0x3c8dbd;}async function showMsg(){var _0x39cfd0={'ZSJoR':_0x641c('19e','(mw^')};if($[_0x641c('19f','3HEr')]()){if(_0x39cfd0[_0x641c('1a0','o[KL')]!=='GsNgt'){$['logErr'](e,resp);}else{$[_0x641c('1a1','Xts7')]($['name'],'',''+message);await notify[_0x641c('1a2','I6^3')](''+$[_0x641c('1a3','Oc0s')],''+message);}}};_0xod4='jsjiami.com.v6';
// prettier-ignore
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`\ud83d\udd14${this.name}, \u5f00\u59cb!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),a={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(a,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t){let e={"M+":(new Date).getMonth()+1,"d+":(new Date).getDate(),"H+":(new Date).getHours(),"m+":(new Date).getMinutes(),"s+":(new Date).getSeconds(),"q+":Math.floor(((new Date).getMonth()+3)/3),S:(new Date).getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,((new Date).getFullYear()+"").substr(4-RegExp.$1.length)));for(let s in e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r)));let h=["","==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="];h.push(e),s&&h.push(s),i&&h.push(i),console.log(h.join("\n")),this.logs=this.logs.concat(h)}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t.stack):this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
